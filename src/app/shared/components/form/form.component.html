<form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
  <div *ngFor="let field of fields">
    <label [for]="field.name">{{ field.label }}</label>

    <input
      *ngIf="
        field.type === 'text' ||
        field.type === 'number' ||
        field.type === 'email'
      "
      [type]="field.type"
      [id]="field.name"
      [formControlName]="field.name"
      [placeholder]="field.placeholder"
    />

    <textarea
      *ngIf="field.type === 'textarea'"
      [id]="field.name"
      [formControlName]="field.name"
      [placeholder]="field.placeholder"
    ></textarea>

    <select
      *ngIf="field.type === 'select'"
      [id]="field.name"
      [formControlName]="field.name"
    >
      <option *ngFor="let option of field.options" [value]="option.value">
        {{ option.label }}
      </option>
    </select>

    <input
      *ngIf="field.type === 'checkbox'"
      type="checkbox"
      [id]="field.name"
      [formControlName]="field.name"
    />

    <input
      *ngIf="field.type === 'radio'"
      type="radio"
      [id]="field.name"
      [formControlName]="field.name"
    />

    <div
      *ngIf="
        formGroup.controls[field.name].invalid &&
        formGroup.get(field.name)?.touched
      "
    >
      <small class="error-message"
        >Поле {{ field.label }} заполнено некорректно</small
      >
    </div>

    <app-button
      [label]="submitBtnTitle"
      [disabled]="loading"
      (buttonClick)="onSubmit()"
    ></app-button>
  </div>
</form>
